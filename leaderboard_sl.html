<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>BMSA! Leaderboard</title>
  <link rel="icon" type="image/x-icon" href="images/smerdy.jpg">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
  <style>
    html,body {height:100%;margin:0;background:#0a0a10;color:#fff;font-family:'Montserrat',sans-serif;}
    .flag {width:20px;height:auto;margin-right:8px;flex-shrink:0;}
    .player-cell {text-align:center;}
    .player-link {display:inline-flex;align-items:center;justify-content:flex-start;color:#fff;text-decoration:none;font-weight:500;min-width:120px;}
    .player-link:hover {text-decoration:underline;color:#ffd700;}
    .player-name {text-align:left;}
    .song-link {color:#fff;text-decoration:none;}
    .song-link:hover {color:#ffd700;text-decoration:underline;}
    .sort-btn {background:none;border:none;color:#fff;cursor:pointer;font-size:0.9em;margin-left:6px;}
    .sort-btn:hover {color:#ffd700;}
    .th-flex {display:flex;justify-content:space-between;align-items:center;white-space:nowrap;}

    .table-container {width:100%;overflow-x:auto;scrollbar-width: thin;scrollbar-color: #af8d19 #1d1d2e;}
    .table-container::-webkit-scrollbar {height: 10px;}
    .table-container::-webkit-scrollbar-track {background: #1d1d2e; border-radius: 10px;}
    .table-container::-webkit-scrollbar-thumb {background: #af8d19; border-radius: 10px;}
    .table-container::-webkit-scrollbar-thumb:hover {background: #ffd700;}

    table {border-collapse:collapse;margin:2em auto;width:100%;min-width:600px;background:#1d1d2e;border-radius:10px;overflow:hidden;}
    th,td {border:1px solid #333;padding:10px;text-align:center;white-space:nowrap;}
    th {background:#af8d19;color:white;}
    tr:nth-child(even) {background:#14141f;} tr:hover {background:#2a2a3d;}

    @media (max-width:768px) {
      th, td {padding:6px;font-size:0.8em;}
      .player-link {min-width:80px;font-size:0.8em;}
      .sort-btn {font-size:0.7em;}
    }

    .sidenav {height:100%;width:0;position:fixed;z-index:4;top:0;left:0;background-color:#0f0f16;overflow-x:hidden;padding-top:10px;transition:0.5s;}
    .sidenav a, .dropdown-btn {font-weight:500;font-size:15px;padding:6px 8px 6px 16px;color:#818181;display:block;border:none;background:none;width:100%;text-align:left;cursor:pointer;outline:none;text-decoration:none;}
    .sidenav a:hover, .dropdown-btn:hover {color:#f1f1f1;}
    #main {transition:margin-left .5s;padding-left:2%;}
    .active {background-color:#af8d19;color:white;}
    .dropdown {display:none;background-color:#1d1d2e;padding-left:8px;}
    .goofy-container {position:fixed;top:0;height:4.5em;left:0;right:0;background-color:#af8d19;z-index:3;}
    .goofy-container h1 {margin-left:1em;display:inline-block;vertical-align:middle;}
  </style>
</head>
<body>
  <!-- side navigation -->
  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="font-size:20px">&times;</a>
    <a href="https://air-afother.github.io/tournament-table/">Homepage</a>
    <button class="dropdown-btn">BMSA! S6 Leaderboards</button>
    <div class="dropdown">
        <a href="https://air-afother.github.io/tournament-table/leaderboard_sd">Beginner bracket</a>
        <a href="https://air-afother.github.io/tournament-table/leaderboard_sr">Lower bracket</a>
        <a href="https://air-afother.github.io/tournament-table/leaderboard_sl">Intermediate bracket</a>
        <a href="https://air-afother.github.io/tournament-table/leaderboard_st">Advanced bracket</a>
    </div>
    <button class="dropdown-btn">Season archive tables</button>
    <div class="dropdown">
      <a href="https://air-afother.github.io/tournament-table/sr-archive.html">Lower bracket archive</a>
      <a href="https://air-afother.github.io/tournament-table/sl-archive.html">Upper bracket archive</a>
    </div>
  </div>

  <!-- top bar -->
  <div class="goofy-container">
    <div class="title" style="padding-left:2%">
      <img src="images/burger.png" alt="burger" style="width:2em;height:2em;display:inline-block;vertical-align: middle;cursor:pointer;" onclick="openNav()">
      <h1>Bottoni Monthly Score Attack!</h1>
      <p id="flavor-text" style="display:inline-block;vertical-align:middle;float:right;padding-right:2%;"></p>
    </div>
  </div>

  <div id="main" style="padding-top:5.2em;">
    <h2 style="text-align:center;">BMSA! S6 Intermediate Bracket Leaderboard</h2>
    <div class="table-container">
      <table id="leaderboard">
        <thead><tr><th><div class='th-flex'><span>#</span><button class='sort-btn' onclick='sortTable(0)'>⇅</button></div></th><th><div class='th-flex'><span>Player</span><button class='sort-btn' onclick='sortTable(1)'>⇅</button></div></th><th><div class='th-flex'><a href='https://boku.tachi.ac/games/bms/7K/songs/58220/CHART' target='_blank' class='song-link'>h◎6 squartatrice -あたしって、ほんと皿-</a><button class='sort-btn' onclick='sortTable(2)'>⇅</button></div></th><th><div class='th-flex'><a href='https://boku.tachi.ac/games/bms/7K/songs/66091/CHART' target='_blank' class='song-link'>★17 We are the xxxx</a><button class='sort-btn' onclick='sortTable(3)'>⇅</button></div></th><th><div class='th-flex'><a href='https://boku.tachi.ac/games/bms/7K/songs/84129/CHART' target='_blank' class='song-link'>sl10 竹</a><button class='sort-btn' onclick='sortTable(4)'>⇅</button></div></th><th><div class='th-flex'><a href='https://boku.tachi.ac/games/bms/7K/songs/87691/CHART' target='_blank' class='song-link'>sl9 Outernoid</a><button class='sort-btn' onclick='sortTable(5)'>⇅</button></div></th><th><div class='th-flex'><a href='https://boku.tachi.ac/games/bms/7K/songs/89439/CHART' target='_blank' class='song-link'>sl0 scualee[ANOTHER]</a><button class='sort-btn' onclick='sortTable(6)'>⇅</button></div></th><th><div class='th-flex'><span>Rating</span><button class='sort-btn' onclick='sortTable(7)'>⇅</button></div></th><th><div class='th-flex'><span>total</span><button class='sort-btn' onclick='sortTable(8)'>⇅</button></div></th></tr></thead>
        <tbody><tr><td style='background-color:#b39700;font-weight:bold; text-align:center;'>1</td><td class='player-cell'><a href="https://boku.tachi.ac/u/nyannurs/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/de.svg" alt="de" class="flag"><span class="player-name">nyannurs</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>3871 (100)</td><td>0 (93)</td><td>93.33</td><td>3871</td></tr>
<tr><td style='background-color:#807e7e;font-weight:bold; text-align:center;'>2</td><td class='player-cell'><a href="https://boku.tachi.ac/u/mizumi_a/games/bms/7K" target="_blank" class="player-link"><span class="player-name">mizumi_a</span></a></td><td>0 (93)</td><td>0 (100)</td><td>3987 (100)</td><td>0 (73)</td><td>0 (93)</td><td>92.0</td><td>3987</td></tr>
<tr><td style='background-color:#915a23;font-weight:bold; text-align:center;'>3</td><td class='player-cell'><a href="https://boku.tachi.ac/u/nyao0711/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/nl.svg" alt="nl" class="flag"><span class="player-name">nyao0711</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>3400 (93)</td><td>0 (93)</td><td>92.0</td><td>3400</td></tr>
<tr><td style=' text-align:center;'>4</td><td class='player-cell'><a href="https://boku.tachi.ac/u/boxexe/games/bms/7K" target="_blank" class="player-link"><span class="player-name">boxexe</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>2932 (86)</td><td>0 (93)</td><td>90.67</td><td>2932</td></tr>
<tr><td style=' text-align:center;'>5</td><td class='player-cell'><a href="https://boku.tachi.ac/u/bmsHATER2000/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/es.svg" alt="es" class="flag"><span class="player-name">bmsHATER2000</span></a></td><td>0 (93)</td><td>0 (100)</td><td>2000 (93)</td><td>0 (73)</td><td>0 (93)</td><td>90.67</td><td>2000</td></tr>
<tr><td style=' text-align:center;'>6</td><td class='player-cell'><a href="https://boku.tachi.ac/u/dotLight/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/it.svg" alt="it" class="flag"><span class="player-name">dotLight</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>208 (80)</td><td>2515 (100)</td><td>90.67</td><td>2723</td></tr>
<tr><td style=' text-align:center;'>7</td><td class='player-cell'><a href="https://boku.tachi.ac/u/bmsfan2000/games/bms/7K" target="_blank" class="player-link"><span class="player-name">bmsfan2000</span></a></td><td>2000 (100)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>89.33</td><td>2000</td></tr>
<tr><td style=' text-align:center;'>8</td><td class='player-cell'><a href="https://boku.tachi.ac/u/bmsfan3000/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/fr.svg" alt="fr" class="flag"><span class="player-name">bmsfan3000</span></a></td><td>0 (93)</td><td>0 (100)</td><td>1500 (86)</td><td>0 (73)</td><td>0 (93)</td><td>89.33</td><td>1500</td></tr>
<tr><td style=' text-align:center;'>9</td><td class='player-cell'><a href="https://boku.tachi.ac/u/Eedu/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/fi.svg" alt="fi" class="flag"><span class="player-name">Eedu</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>10</td><td class='player-cell'><a href="https://boku.tachi.ac/u/Ranzel/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/us.svg" alt="us" class="flag"><span class="player-name">Ranzel</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>11</td><td class='player-cell'><a href="https://boku.tachi.ac/u/Tokakitake/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/jp.svg" alt="jp" class="flag"><span class="player-name">Tokakitake</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>12</td><td class='player-cell'><a href="https://boku.tachi.ac/u/Zlew/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/pl.svg" alt="pl" class="flag"><span class="player-name">Zlew</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>13</td><td class='player-cell'><a href="https://boku.tachi.ac/u/ergo/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/ee.svg" alt="ee" class="flag"><span class="player-name">ergo</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>14</td><td class='player-cell'><a href="https://boku.tachi.ac/u/nora/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/us.svg" alt="us" class="flag"><span class="player-name">nora</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr>
<tr><td style=' text-align:center;'>15</td><td class='player-cell'><a href="https://boku.tachi.ac/u/tobycool/games/bms/7K" target="_blank" class="player-link"><img src="https://flagcdn.com/us.svg" alt="us" class="flag"><span class="player-name">tobycool</span></a></td><td>0 (93)</td><td>0 (100)</td><td>0 (80)</td><td>0 (73)</td><td>0 (93)</td><td>88.0</td><td>0</td></tr></tbody>
      </table>
    </div>
  </div>
  <div style="width:90%;max-width:1200px;margin:1em auto;text-align:left;">
        <p>
        Rating for each score is calculated according to your rank within each song, with this formula:  <br>
        Rating=100×(1-((Rank-1)/Players))<br>
        this means that if you get the highest score on that song, that score gives 100 Rating, and if you get last, you get 0 Rating. <br>
        The total Rating is the average of the Rating you got across all songs.
        </p>
  </div>

  <script>
    var dropdown = document.getElementsByClassName("dropdown-btn");
    for (var i = 0; i < dropdown.length; i++) {
      dropdown[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var dropdownContent = this.nextElementSibling;
        if (dropdownContent.style.display === "block") {
          dropdownContent.style.display = "none";
        } else {
          dropdownContent.style.display = "block";
        }
      });
    }
    function openNav() { document.getElementById("mySidenav").style.width = "250px"; }
    function closeNav() { document.getElementById("mySidenav").style.width = "0"; }

    var textarray = ["enjoy the cool air out on the","take the world by storm","a refreshing atmosphere","FEEL'in SEPIA AIR","Suggest more texts on discord!"];
    function RndText() {
      var rannum = Math.floor(Math.random()*textarray.length);
      document.getElementById('flavor-text').innerHTML = textarray[rannum];
    }
    onload = function() { RndText(); }

    let sortDirections = {};

    function parseCellValue(v) {
      if(v === "" || v === null) return -Infinity;
      var n = parseInt(v);
      if(!isNaN(n)) return n;
      return v.toString().toLowerCase();
    }

    function sortTable(colIndex) {
      const table = document.getElementById("leaderboard");
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.querySelectorAll("tr"));

      const currentDir = sortDirections[colIndex] || "asc";
      const newDir = currentDir === "asc" ? "desc" : "asc";
      sortDirections[colIndex] = newDir;

      rows.sort((a,b) => {
        const av = a.children[colIndex].innerText.trim();
        const bv = b.children[colIndex].innerText.trim();
        const ap = parseCellValue(av);
        const bp = parseCellValue(bv);

        if(ap < bp) return newDir === "asc" ? -1 : 1;
        if(ap > bp) return newDir === "asc" ? 1 : -1;
        return 0;
      });

      tbody.innerHTML = "";
      rows.forEach(r => tbody.appendChild(r));
    }

    document.addEventListener("DOMContentLoaded", function() {
      document.querySelectorAll(".player-link, .song-link").forEach(function(el) {
        el.addEventListener("click", function(e) {
          e.stopPropagation();
        });
      });
    });
  </script>
</body>
</html>
